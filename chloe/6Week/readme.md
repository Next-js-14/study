### 백엔드 서버 세팅하기
- postgres, redis 설치하고 pgAdmin에서 DB서버를 세팅해주면 localhost:9090/api에서 swagger문서 확인가능
- 서버액션인 경우에 서버에서 실패가 떠도 안보이는 것을 조심해야 함

### 로그인과 회원가입 실제로 하기
- 이미지 업로드 주소를 백엔드 주소로 바꾸기 -> next의 rewrite라는 기능이 있어서 이 부분을 next-config.js에 적어주면 됨
- 로그인을 했냐 안했냐의 기준은 세션 토큰 쿠키가 있느냐의 여부인데 세션 토큰 쿠키는 프론트 서버 전용이고 백엔드는 connect.sid라는 토큰(백엔드라우터 토큰)을 사용함
- 백엔드 서버에서 로그인을 할 때 서버는 토큰을 쿠키에 넣어서 보내주고 있음. connect.sid를 쿠키에 넣어서 보내줌 -> 프론트 서버에서 백엔드 서버에 로그인 토큰을 받아오는 것임
- 토큰이 문자열인 경우 npm i cookie 로 문자열로 된 쿠키를 객체로 만들어주는 라이브러리를 임포트함. 
- 여러 브라우저가 프론트 서버를 바라보기 때문에 프론트 서버에 로그인 쿠키를 심으면 개인정보 유출 문제가 발생할 수 있음. 브라우저에 쿠키를 심어야 함

### useMutation 사용하기
- isPending, isSuccess 등 상태관리가 사용하기 때문에 사용함. 
- optimistic update 을 할 때 useMutation을 쓰면 편함: 반응속도를 빠르게 하는 것. 요청이 바로 성공했다고 치고 화면에 띄워주고, 실패했을 때는 원상태로 되돌려버리는 것(매번 성공하는 상황에서는 반응속도가 빨라서 긍정적이지만 에러 발생 상황에서는 위험). 
- 데브 툴에서 뮤테이션 동작 여부를 화긴할 수 있음.

### optimistic update 적용하기
- 누르면 바로 '팔로우'가 '언팔로우'로 바뀌는 것 - optimistic update를 적용한 것
- onMutate(mutate를 호출), onError(에러났을 때 롤백하는 코드), onSettled(새로 데이터를 가져오는 것)
- onMutate에서 queryKey를 찾아서 가져와야 함 